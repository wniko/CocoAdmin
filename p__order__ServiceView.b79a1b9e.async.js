(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"2/ge":function(e,t,r){"use strict";r.d(t,"f",(function(){return s})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return b})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return j})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return S})),r.d(t,"h",(function(){return w})),r.d(t,"g",(function(){return T})),r.d(t,"e",(function(){return x})),r.d(t,"a",(function(){return N}));var a=r("XEnU"),n=r("c1Ei"),c=r.n(n),u=r("5Tp6"),o=r("9kvl"),i=r("asXk");function s(){return l.apply(this,arguments)}function l(){return l=Object(u["a"])(c.a.mark((function e(){var t,r=arguments;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,e.abrupt("return",Object(o["e"])("/coco/package/order/user/info",{method:"GET",params:{siteId:t}}).then((function(e){var t;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.dicUserDeviceVersionInfoList)||[]})));case 2:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return p=Object(u["a"])(c.a.mark((function e(){var t,r=arguments;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,e.abrupt("return",Object(o["e"])("/coco/package/order/user/info",{method:"GET",params:{siteId:t}}).then((function(e){var t;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.dicUserBusinessServicePackageList.map((function(e){return{businessServiceId:e.businessServiceId,businessServiceName:e.businessServiceName,userProductPrice:e.userProductPrice,productDays:e.productDays,servicePriceChildrenList:e.dicUserBusinessServicePriceList||[]}})))||[]})));case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function b(){return m.apply(this,arguments)}function m(){return m=Object(u["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/individual/info",{method:"GET"}).then((function(e){var t;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{businessServiceId:e.businessId,businessServiceName:e.businessServiceName,userProductPrice:e.packagePrice,productDays:e.packageDays}})))||[]})));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return f.apply(this,arguments)}function f(){return f=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/pre/order",{method:"POST",data:Object(a["a"])({token:Object(i["d"])()},t)}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function O(e){return y.apply(this,arguments)}function y(){return y=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/order/close",{method:"POST",data:{token:Object(i["d"])(),orderNo:t}}));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function j(e){return h.apply(this,arguments)}function h(){return h=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/device/renew",{method:"POST",data:Object(a["a"])({token:Object(i["d"])()},t)}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return k=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/individual/business",{method:"POST",data:Object(a["a"])({token:Object(i["d"])()},t)}));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function S(e){return E.apply(this,arguments)}function E(){return E=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/individual/multiwindows",{method:"POST",data:Object(a["a"])({token:Object(i["d"])()},t)}));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function w(e){return I.apply(this,arguments)}function I(){return I=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/order/list",{method:"POST",data:Object(a["a"])({token:Object(i["d"])()},t)}));case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function T(e){return F.apply(this,arguments)}function F(){return F=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/detail",{method:"GET",params:{orderId:t}}));case 1:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function x(e){return C.apply(this,arguments)}function C(){return C=Object(u["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/device/allocation/record/list",{method:"POST",data:{token:Object(i["d"])(),recordId:t,page:1,pageSize:1e4}}));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function N(e,t){return P.apply(this,arguments)}function P(){return P=Object(u["a"])(c.a.mark((function e(t,r){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["e"])("/coco/package/order/user/order/query",{method:"POST",data:{token:Object(i["d"])(),orderSn:t,orderType:r}}));case 1:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}},"40b1":function(e,t,r){e.exports={card:"antd-pro-pages-order-style-card",heading:"antd-pro-pages-order-style-heading",steps:"antd-pro-pages-order-style-steps",stepFormText:"antd-pro-pages-order-style-stepFormText",money:"antd-pro-pages-order-style-money",uppercase:"antd-pro-pages-order-style-uppercase",information:"antd-pro-pages-order-style-information",label:"antd-pro-pages-order-style-label",desc:"antd-pro-pages-order-style-desc",errorIcon:"antd-pro-pages-order-style-errorIcon",anticon:"antd-pro-pages-order-style-anticon",errorPopover:"antd-pro-pages-order-style-errorPopover",errorListItem:"antd-pro-pages-order-style-errorListItem",errorField:"antd-pro-pages-order-style-errorField",editable:"antd-pro-pages-order-style-editable",advancedForm:"antd-pro-pages-order-style-advancedForm",optional:"antd-pro-pages-order-style-optional"}},"b/Xm":function(e,t,r){"use strict";r.r(t);var a=r("q1tI"),n=r.n(a),c=r("9kvl"),u=r("tMyG"),o=r("nhC9"),i=(r("J+/v"),r("MoRW")),s=(r("+L6B"),r("2/Rp")),l=r("c1Ei"),d=r.n(l),p=r("5Tp6"),b=(r("miYZ"),r("tsqr")),m=r("3S9h"),v=r("k16G"),f=(r("2qtc"),r("kLXV")),O=(r("/zsF"),r("PArb")),y=(r("y8nQ"),r("Vl3Y")),j=r("IIKO"),h=r("Ga8k"),g=r("5qq5"),k=r("FJDo"),S=r("ejzm"),E=r("40b1"),w=r.n(E),I=r("c+yx"),T=r("t5N2"),F=r.n(T),x=r("2/ge"),C=[{value:1,label:"\u4e00\u7ad9"},{value:2,label:"\u4e8c\u7ad9"}],N={labelCol:{span:5},wrapperCol:{span:19}},P=function(e){var t=e.visible,r=e.orderNo,a=e.content,c=e.amount,u=e.paymentType,o=e.cancelOrder,i=e.payOrder;return n.a.createElement(f["a"],{title:"\u8fd8\u6709\u8ba2\u5355\u672a\u652f\u4ed8",visible:t,okText:"\u7ee7\u7eed\u652f\u4ed8",cancelText:"\u53d6\u6d88\u8ba2\u5355",width:550,onOk:i,onCancel:o,closable:!1},n.a.createElement(y["a"],null,n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u8ba2\u5355\u53f7"}),r||"\u65e0"),n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u8ba2\u5355\u5185\u5bb9"}),a||"\u65e0"),n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u652f\u4ed8\u91d1\u989d"}),n.a.createElement("span",{className:w.a.money},Object(I["b"])(c||0)),n.a.createElement("span",null," \u5143 ")),u&&n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u652f\u4ed8\u65b9\u5f0f"}),2===u?"\u652f\u4ed8\u5b9d":"\u5fae\u4fe1\u652f\u4ed8")),n.a.createElement(O["a"],{style:{margin:"40px 0 24px"}}),n.a.createElement("div",{className:w.a.desc},n.a.createElement("h4",null,"\u8bf4\u660e"),n.a.createElement("p",null,"\u76ee\u524d\u4ec5\u652f\u6301\u5355\u4e2a\u8ba2\u5355\u7684\u63d0\u4ea4\uff0c\u5728\u4e0a\u6b21\u8ba2\u5355\u672a\u5b8c\u6210\u7684\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb",n.a.createElement("strong",null,"\u7ee7\u7eed\u652f\u4ed8"),"\u5b8c\u6210\u4e0a\u6b21\u672a\u5b8c\u7684\u652f\u4ed8\u884c\u4e3a\uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb",n.a.createElement("strong",null,"\u53d6\u6d88\u8ba2\u5355"),"\u53d6\u6d88\u4e0a\u6b21\u7684\u8ba2\u5355\uff0c\u518d\u91cd\u65b0\u63d0\u4ea4\u65b0\u7684\u8ba2\u5355\u3002")))},V=function(){var e,t,r=Object(c["g"])("deviceGroupList"),u=r.fetchDeviceGroupList,o=Object(a["useState"])([]),l=Object(v["a"])(o,2),f=l[0],E=l[1],T=Object(a["useState"])([]),V=Object(v["a"])(T,2),D=V[0],G=V[1],L=Object(a["useState"])([]),q=Object(v["a"])(L,2),R=q[0],z=q[1],B=Object(a["useState"])(""),J=Object(v["a"])(B,2),M=J[0],U=J[1],X=Object(a["useState"])(""),A=Object(v["a"])(X,2),Q=A[0],W=A[1],Y=Object(a["useState"])(0),H=Object(v["a"])(Y,2),K=H[0],Z=H[1],$=Object(a["useState"])(0),_=Object(v["a"])($,2),ee=_[0],te=_[1],re=Object(a["useState"])(0),ae=Object(v["a"])(re,2),ne=ae[0],ce=ae[1],ue=Object(a["useState"])(!0),oe=Object(v["a"])(ue,2),ie=oe[0],se=oe[1],le=Object(a["useState"])(0),de=Object(v["a"])(le,2),pe=de[0],be=de[1],me=Object(a["useState"])(!1),ve=Object(v["a"])(me,2),fe=ve[0],Oe=ve[1],ye=Object(a["useState"])(!1),je=Object(v["a"])(ye,2),he=je[0],ge=je[1],ke=Object(a["useState"])({}),Se=Object(v["a"])(ke,2),Ee=Se[0],we=Se[1],Ie=Object(a["useState"])(""),Te=Object(v["a"])(Ie,2),Fe=Te[0],xe=Te[1],Ce=Object(a["useRef"])(),Ne=Object(a["useRef"])();Object(a["useEffect"])((function(){Pe()}),[]);var Pe=Object(a["useCallback"])((function(){Object(x["j"])().then((function(e){E(e),Ve(e),De(e)}))}),[]),Ve=Object(a["useCallback"])((function(e){var t,r,a,n=e.reduce((function(e,t){return e.some((function(e){return e.value===t.businessServiceId}))?Object(m["a"])(e):[].concat(Object(m["a"])(e),[{label:t.businessServiceName,value:t.businessServiceId}])}),[]),c=null===(t=Ce.current)||void 0===t?void 0:t.getFieldValue("businessServiceId");c&&n.find((function(e){return e.value===c}))||(null===(r=Ce.current)||void 0===r||r.setFieldsValue({businessServiceId:null===(a=n[0])||void 0===a?void 0:a.value}));G(n)}),[Ce.current]),De=Object(a["useCallback"])((function(e){var t,r,a,n=null===(t=Ce.current)||void 0===t?void 0:t.getFieldValue("businessServiceId");n||(n=null===(a=e[0])||void 0===a?void 0:a.businessServiceId);var c,u,o=e.filter((function(e){return e.businessServiceId===n})).map((function(e){return{label:"".concat(e.productDays,"\u5929").concat(e.userProductPrice,"\u5143"),value:e.productDays}})),i=null===(r=Ce.current)||void 0===r?void 0:r.getFieldValue("days");i&&o.find((function(e){return e.value===i}))||(null===(c=Ce.current)||void 0===c||c.setFieldsValue({days:null===(u=o[0])||void 0===u?void 0:u.value}));z(o)}),[Ce.current]),Ge=Object(a["useCallback"])((function(e,t){var r=e.businessServiceId;r&&Pe()}),[]),Le=Object(a["useCallback"])((function(e){se(!(e>0)),be(e)}),[]),qe=Object(a["useCallback"])((function(e,t){for(var r=0;r<f.length;r++){var a=f[r].servicePriceChildrenList;if(a&&a.length>0){for(var n=0;n<a.length;n++)if(a[n].businessServiceId===e&&a[n].productDays===t)return a[n].userProductPrice}else if(f[r].businessServiceId===e&&f[r].productDays===t)return f[r].userProductPrice}return 0}),[f]),Re=Object(a["useCallback"])((function(){var e,t,r,a=null===(e=Ce.current)||void 0===e?void 0:e.getFieldValue("businessServiceId"),n=null===(t=Ce.current)||void 0===t?void 0:t.getFieldValue("days"),c=null===(r=Ce.current)||void 0===r?void 0:r.getFieldValue("counts"),u=qe(a,n);return u*c}),[Ce.current]),ze=Object(a["useCallback"])((function(){var e,t,r,a,n;if(!fe){var c=null===(e=Ce.current)||void 0===e?void 0:e.getFieldValue("businessServiceId"),u=null===(t=Ce.current)||void 0===t?void 0:t.getFieldValue("siteId"),o=null===(r=Ce.current)||void 0===r?void 0:r.getFieldValue("days"),i=null===(a=Ce.current)||void 0===a?void 0:a.getFieldValue("counts"),s=null===(n=Ne.current)||void 0===n?void 0:n.getFieldValue("type"),l=null;if(13===c&&(l=x["k"]),15===c&&(l=x["l"]),!l)return Oe(!1),void b["b"].error("\u627e\u4e0d\u5230\u8981\u8d2d\u4e70\u7684\u670d\u52a1\u7c7b\u578b\uff01");Oe(!0),l({applyNum:i,days:o,siteId:u,paymentType:s}).then((function(e){Je({orderNo:e.data.orderNo,content:e.data.content,amount:e.data.userOrderAmount,paymentType:e.data.paymentType,paymentData:e.data.qrCode})})).catch((function(e){var t=e.data;"10030"==t.code&&(ge(!0),we({orderNo:t.data.orderNo,content:t.data.content,amount:t.data.userOrderAmount,paymentType:t.data.paymentType,paymentData:t.data.qrCode}))})).finally((function(){Oe(!1)}))}}),[Ce.current,Ne.current,fe]),Be=Object(a["useCallback"])((function(e){var t=e.orderNo;t&&Object(x["c"])(t).then((function(){ge(!1),b["b"].success("\u5df2\u53d6\u6d88\u4e0a\u6b21\u7684\u8ba2\u5355\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\u65b0\u7684\u8ba2\u5355")}))}),[]),Je=Object(a["useCallback"])((function(e){var t=e.paymentType,r=e.paymentData;if(2===t){var a=window.open(),n=document.createElement("div"),c=(null===r||void 0===r?void 0:r.replace(/[\\\b\f\n\r\t]/g,""))||"";n.innerHTML=c,null===a||void 0===a||a.document.body.appendChild(n),null===a||void 0===a||a.document.forms[0].submit(),xe("")}3===t&&xe(r||""),ge(!1),be((function(e){return e+1}))}),[]),Me=Object(a["useCallback"])((function(){u(!1),c["c"].push("/device/list")}),[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(h["b"],{current:pe,onCurrentChange:Le,submitter:ie},n.a.createElement(h["b"].StepForm,{name:"device",title:"\u586b\u5199\u8ba2\u5355",onFinish:function(){var e=Object(p["a"])(d.a.mark((function e(t){var r,a,n,c,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.businessServiceId,a=t.siteId,n=t.days,c=t.counts,c){e.next=4;break}return b["b"].warning("\u8ba2\u8d2d\u6570\u91cf\u4e0d\u80fd\u4e3a0"),e.abrupt("return",!1);case 4:return u=f.find((function(e){return e.businessServiceId===r&&e.productDays===n})),u&&U("".concat(u.businessServiceName,"(").concat(u.userProductPrice,"\u5143)")),a&&W(1===a?"\u4e00\u7ad9":"\u4e8c\u7ad9"),Z(n),te(c),ce(Re()),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onValuesChange:Ge,hideRequiredMark:!0,formRef:Ce},n.a.createElement(g["a"].Group,{name:"businessServiceId",label:"\u9009\u62e9\u670d\u52a1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u589e\u503c\u670d\u52a1\u7c7b\u578b"}],radioType:"button",options:D}),13===(null===(e=Ce.current)||void 0===e?void 0:e.getFieldValue("businessServiceId"))&&n.a.createElement(g["a"].Group,{name:"siteId",label:"\u9009\u62e9\u7ad9\u70b9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u591a\u8def\u76f4\u64ad\u7ad9\u70b9"}],radioType:"button",options:C}),n.a.createElement(g["a"].Group,{name:"days",label:"\u8ba2\u8d2d\u65f6\u957f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e91\u673a\u7684\u8ba2\u8d2d\u65f6\u957f"}],radioType:"button",options:R}),n.a.createElement(k["a"],{label:"\u8ba2\u8d2d\u6570\u91cf",name:"counts",min:1,max:1e3,initialValue:1,fieldProps:{precision:0}})),n.a.createElement(h["b"].StepForm,{name:"payment",title:"\u786e\u8ba4\u8ba2\u5355",layout:"horizontal",formRef:Ne},n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u670d\u52a1\u7c7b\u578b"}),M),13===(null===(t=Ce.current)||void 0===t?void 0:t.getFieldValue("businessServiceId"))&&n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u670d\u52a1\u7ad9\u70b9"}),Q),n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u8ba2\u8d2d\u65f6\u957f"}),K,"\u5929"),n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u8ba2\u8d2d\u6570\u91cf"}),ee,"\u4e2a"),n.a.createElement(y["a"].Item,Object(j["a"])({},N,{className:w.a.stepFormText,label:"\u652f\u4ed8\u91d1\u989d"}),n.a.createElement("span",{className:w.a.money},Object(I["b"])(ne)),n.a.createElement("span",null," \u5143 ")),n.a.createElement(O["a"],{style:{margin:"24px 0"}}),n.a.createElement(g["a"].Group,Object(j["a"])({name:"type",label:"\u652f\u4ed8\u65b9\u5f0f",width:"lg",initialValue:2,className:w.a.stepFormText},N,{options:[{label:"\u652f\u4ed8\u5b9d",value:2},{label:"\u5fae\u4fe1\u652f\u4ed8",value:3}]})),n.a.createElement(y["a"].Item,{style:{marginBottom:8},wrapperCol:{xs:{span:24,offset:0},sm:{span:N.wrapperCol.span,offset:N.labelCol.span}}},n.a.createElement(s["a"],{onClick:function(){return Le(pe-1)},style:{marginRight:8}},"\u4e0a\u4e00\u6b65"),n.a.createElement(s["a"],{type:"primary",onClick:ze,loading:fe},"\u63d0\u4ea4"))),n.a.createElement(h["b"].StepForm,{title:"\u5b8c\u6210\u8ba2\u5355"},Fe?n.a.createElement(i["a"],{icon:n.a.createElement(S["QRCode"],{value:Fe,size:220,logoImage:F.a}),subTitle:"\u6253\u5f00\u5fae\u4fe1\u4f7f\u7528\u626b\u4e00\u626b\uff0c\u626b\u63cf\u4e0a\u65b9\u4e8c\u7ef4\u7801\uff0c\u8fdb\u884c\u652f\u4ed8",extra:n.a.createElement(n.a.Fragment,null,n.a.createElement(s["a"],{type:"primary",onClick:function(){return Le(0)}},"\u518d\u6b21\u8ba2\u8d2d"),n.a.createElement(s["a"],{onClick:Me},"\u5b8c\u6210\u652f\u4ed8")),className:w.a.result}):n.a.createElement(i["a"],{status:"success",title:"\u63d0\u4ea4\u6210\u529f",subTitle:"\u8bf7\u5728\u65b0\u6253\u5f00\u7684\u9875\u9762\uff0c\u4f7f\u7528\u652f\u4ed8\u5b9d\u8fdb\u884c\u652f\u4ed8",extra:n.a.createElement(n.a.Fragment,null,n.a.createElement(s["a"],{type:"primary",onClick:function(){return Le(0)}},"\u518d\u6b21\u8ba2\u8d2d"),n.a.createElement(s["a"],{onClick:Me},"\u5b8c\u6210\u652f\u4ed8")),className:w.a.result}))),n.a.createElement(P,Object(j["a"])({visible:he},Ee,{cancelOrder:function(){return Be(Ee)},payOrder:function(){return Je(Ee)}})))},D=function(){var e=Object(c["g"])("@@initialState"),t=e.initialState,r=(null===t||void 0===t?void 0:t.settings)||{};r.serviceOrder;return n.a.createElement(u["a"],null,n.a.createElement(o["a"],{bordered:!1,className:w.a.steps},n.a.createElement(V,null)))};t["default"]=D},t5N2:function(e,t,r){e.exports=r.p+"static/WePayLogo.c5404987.png"}}]);